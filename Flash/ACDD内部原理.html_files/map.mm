<map version="freeplane 1.3.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="ACDD&#x5185;&#x90e8;&#x539f;&#x7406;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" FOLDED="false" ID="ID_1723255651" CREATED="1283093380553" MODIFIED="1465785524754">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<hook NAME="MapStyle">
    <properties show_note_icons="true"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<stylenode LOCALIZED_TEXT="styles.predefined" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" POSITION="right">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<stylenode LOCALIZED_TEXT="default" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.floating" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="hide_edge" COLOR="#808080" WIDTH="thin"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" POSITION="right">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<stylenode LOCALIZED_TEXT="styles.topic" COLOR="#18898b" STYLE="fork" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="Dialog" SIZE="10" BOLD="true" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="fork" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="Dialog" SIZE="10" BOLD="true" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="Dialog" SIZE="10" BOLD="true" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<icon BUILTIN="yes"/>
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" POSITION="right">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="18" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#00b439" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="14" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="12" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1">
<edge STYLE="bezier" COLOR="#808080" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</stylenode>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="3"/>
<node TEXT="attachBaseContext" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" POSITION="right" ID="ID_193857761" CREATED="1465785527065" MODIFIED="1465785577557">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="ACDDInitializer&#x5b9e;&#x4f8b;&#x5316;&#x53ca;init&#x8c03;&#x7528;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1748769497" CREATED="1465785618938" MODIFIED="1465785636845">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="isPurgeUpdate&#x662f;&#x5426;&#x9700;&#x8981;&#x6e05;&#x7406;&#x65e7;&#x63d2;&#x4ef6;&#x5347;&#x7ea7;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_665885708" CREATED="1465801409512" MODIFIED="1465971865750">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<hook NAME="FirstGroupNode"/>
</node>
<node TEXT="ACDDHacks.defineAndVerify();" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1098655491" CREATED="1465785726997" MODIFIED="1465878828641">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 9.0pt"><font color="#629755"><i>/**<br/> * &#23581;&#35797;&#20462;&#22797;HandlerHack&#20877;&#27425;&#34987;&#31995;&#32479;&#26367;&#25442;&#38382;&#39064;<br/> */<br/></i></font><font color="#cc7832">new </font>Thread(<font color="#6a8759">&quot;ACDD_hackH&quot;</font>) {<br/>    <font color="#bbb529">@Override<br/>    </font><font color="#cc7832">public void </font><font color="#ffc66d">run</font>() {<br/>        <font color="#cc7832">int </font>count = <font color="#6897bb">0</font><font color="#cc7832">;<br/>        while</font>(count &lt; <font color="#6897bb">2000</font>) {<br/>            <font color="#cc7832">try </font>{<br/>                Thread.<i>sleep</i>(<font color="#6897bb">100</font>)<font color="#cc7832">;<br/>                </font>AndroidHack.<i>hackH</i>()<font color="#cc7832">;<br/>            </font>} <font color="#cc7832">catch </font>(Exception e) {<br/>            }<br/>            count++<font color="#cc7832">;<br/>        </font>}<br/>    }<br/>}.start()<font color="#cc7832">;</font></pre>
  </body>
</html>
</richcontent>
<node TEXT="&#x5b9e;&#x4f8b;&#x5316;ACDDHacks" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1904569712" CREATED="1465881016302" MODIFIED="1465881115314">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x53cd;&#x5c04;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1740816381" CREATED="1465881078718" MODIFIED="1465881151699">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="allClasses" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1770016070" CREATED="1465881154400" MODIFIED="1465881156650">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="LoadedApk = Hack.into(&quot;android.app.LoadedApk&quot;);" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_948814363" CREATED="1465881211991" MODIFIED="1465881213250">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="ActivityThread = Hack.into(&quot;android.app.ActivityThread&quot;);" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1247463906" CREATED="1465881214222" MODIFIED="1465881222818">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="allConstructors" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1622024887" CREATED="1465881157646" MODIFIED="1465881165106">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="allFields" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_881204618" CREATED="1465881166398" MODIFIED="1465881173338">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="LoadedApk_mClassLoader = LoadedApk.field(&quot;mClassLoader&quot;).ofType(&#xa;                ClassLoader.class);" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_489201594" CREATED="1465881262554" MODIFIED="1465881263971">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="allMethods" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1807519919" CREATED="1465881173798" MODIFIED="1465881179863">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="ActivityThread_currentActivityThread = ActivityThread.method(&#xa;                &quot;currentActivityThread&quot;);" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1267759800" CREATED="1465881283229" MODIFIED="1465962096123">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      public static ActivityThread currentActivityThread() {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return sCurrentActivityThread;
    </p>
    <p>
      }
    </p>
  </body>
</html>

</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="AndroidHack.injectClassLoader&#x6ce8;&#x5165;&#x4ee3;&#x7406;classloader" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1907695845" CREATED="1465881332126" MODIFIED="1465970536405">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#26367;&#25442;&#25554;&#20214;loadApk&#30340;classLoader&#20026;DelegateClassLoader
    </p>
    <p>
      DelegateClassLoader&#30340;findclass&#36890;&#36807;&#33719;&#21462;&#23545;&#24212;BundleImpl&#21435;findclass
    </p>
  </body>
</html>

</richcontent>
<node TEXT="getLoadedApk" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1145375341" CREATED="1465953549485" MODIFIED="1465970309153">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      ACDDHacks.LoadedApk_mClassLoader.set(loadedApk, classLoader);
    </p>
  </body>
</html>

</richcontent>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#26367;&#25442;&#20026;DelegateClassLoader
    </p>
    <p>
      
    </p>
    <p>
      ActivityThread.java
    </p>
    <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="LC1768" class="blob-code blob-code-inner js-file-line">
          public&#160;final&#160;LoadedApk&#160;getPackageInfoNoCheck(ApplicationInfo&#160;&#160;ai,
        </td>
      </tr>
      <tr>
        <td id="LC1769" class="blob-code blob-code-inner js-file-line">
          CompatibilityInfo&#160;compatInfo) {
        </td>
      </tr>
      <tr>
        <td id="LC1770" class="blob-code blob-code-inner js-file-line">
          return&#160;getPackageInfo(ai, compatInfo, null, false, true, false);
        </td>
      </tr>
    </table>
    }

    <p>
      
    </p>
    <p>
      // These can be accessed by multiple threads; mPackages is the lock.
    </p>
    <p>
      &#160;&#160;&#160;&#160;// XXX For now we keep around information about all packages we have
    </p>
    <p>
      &#160;&#160;&#160;&#160;// seen, not removing entries from this map.
    </p>
    <p>
      &#160;&#160;&#160;&#160;// NOTE: The activity and window managers need to call in to
    </p>
    <p>
      &#160;&#160;&#160;&#160;// ActivityThread to do things like update resource configurations,
    </p>
    <p>
      &#160;&#160;&#160;&#160;// which means this lock gets held while the activity and window managers
    </p>
    <p>
      &#160;&#160;&#160;&#160;// holds their own lock.&#160;&#160;Thus you MUST NEVER call back into the activity manager
    </p>
    <p>
      &#160;&#160;&#160;&#160;// or window manager or anything that depends on them while holding this lock.
    </p>
    <p>
      &#160;&#160;&#160;&#160;// These LoadedApk are only valid for the userId that we're running as.
    </p>
    <p>
      &#160;&#160;&#160;&#160;final ArrayMap&lt;String, WeakReference&lt;LoadedApk&gt;&gt; mPackages
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= new ArrayMap&lt;String, WeakReference&lt;LoadedApk&gt;&gt;();
    </p>
    <p>
      &#160;&#160;&#160;&#160;final ArrayMap&lt;String, WeakReference&lt;LoadedApk&gt;&gt; mResourcePackages
    </p>
    <p>
      = new ArrayMap&lt;String, WeakReference&lt;LoadedApk&gt;&gt;();
    </p>
  </body>
</html>

</richcontent>
</node>
</node>
<node TEXT="AndroidHack.injectInstrumentationHook" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_238341905" CREATED="1465881410462" MODIFIED="1465881411403">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="ACDDHacks.ActivityThread_mInstrumentation.set(activityThread,&#xa;                instrumentation);" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1003771831" CREATED="1465959265134" MODIFIED="1465959266022">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="injectApplication" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1105253408" CREATED="1465881412406" MODIFIED="1465881421946">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="ACDDHacks.LoadedApk_mApplication.set(loadedApk, application);" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1147119166" CREATED="1465959187566" MODIFIED="1465959194694">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="ACDDHacks.ActivityThread_mInitialApplication.set(activityThread,&#xa;                application);" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_445596669" CREATED="1465959195810" MODIFIED="1465959200686">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="AndroidHack.hackH();" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1634135264" CREATED="1465878829811" MODIFIED="1465959045386">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 9.0pt"><font color="#cc7832">public static </font>Handler <font color="#ffc66d">hackH</font>() <font color="#cc7832">throws </font>Exception {<br/>    Object activityThread = <i>getActivityThread</i>()<font color="#cc7832">;<br/>    if </font>(activityThread == <font color="#cc7832">null</font>) {<br/>        <font color="#cc7832">throw new </font>Exception(<br/>                <font color="#6a8759">&quot;Failed to get ActivityThread.sCurrentActivityThread&quot;</font>)<font color="#cc7832">;<br/>    </font>}<br/>    <font color="#cc7832">try </font>{<br/>        Handler handler = (Handler) ACDDHacks.<font color="#9876aa"><i>ActivityThread<br/>                </i></font>.field(<font color="#6a8759">&quot;mH&quot;</font>)<br/>                .ofType(Hack.<i>into</i>(<font color="#6a8759">&quot;android.app.ActivityThread$H&quot;</font>)<br/>                        .getmClass()).get(activityThread)<font color="#cc7832">;<br/>        </font>Field declaredField = Handler.<font color="#cc7832">class</font>.getDeclaredField(<font color="#6a8759">&quot;mCallback&quot;</font>)<font color="#cc7832">;<br/>        </font>declaredField.setAccessible(<font color="#cc7832">true</font>)<font color="#cc7832">;<br/>        </font>declaredField.set(handler<font color="#cc7832">, </font><i>getHandlerHack</i>(handler<font color="#cc7832">,<br/>                </font>activityThread))<font color="#cc7832">;<br/>    </font>} <font color="#cc7832">catch </font>(HackAssertionException e) {<br/>        e.printStackTrace()<font color="#cc7832">;<br/>    </font>}<br/>    <font color="#cc7832">return null;<br/></font>}</pre>
  </body>
</html>
</richcontent>
<node TEXT="handleMessage" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_264478928" CREATED="1465881491549" MODIFIED="1465956757805">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#36807;&#26367;&#25442;ActivityThread&#25104;&#21592;&#21464;&#37327;mH&#30340;&#25104;&#21592;&#21464;&#37327;mCallback&#23454;&#29616;&#25318;&#25130;&#28040;&#24687;
    </p>
  </body>
</html>
</richcontent>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#65306;&#26367;&#25442;&#31995;&#32479;Handler&#30340;mCallback&#23454;&#29616;&#25318;&#25130;
    </p>
  </body>
</html>
</richcontent>
<node TEXT="LAUNCH_ACTIVITY" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1679936493" CREATED="1465881514893" MODIFIED="1465911668965">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<hook NAME="FirstGroupNode"/>
</node>
<node TEXT="CREATE_SERVICE" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_630703115" CREATED="1465881523808" MODIFIED="1465881530600">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="RECEIVER" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1033039949" CREATED="1465881530886" MODIFIED="1465881537802">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x62e6;&#x622a;&#x8fd9;&#x4e09;&#x4e2a;&#x6d88;&#x606f;&#x542f;&#x52a8;&#x63d2;&#x4ef6;&#x5904;&#x7406;&#x540e;&#x518d;&#x8c03;&#x7528;&#x7cfb;&#x7edf;&#x539f;&#x6765;handle.handleMessage" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1968257460" CREATED="1465911668965" MODIFIED="1465911783148">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<hook NAME="SummaryNode"/>
</node>
</node>
<node TEXT="InstrumentationHook" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1099273694" CREATED="1465953038432" MODIFIED="1465953173351">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<node TEXT="newActivity" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1711066856" CREATED="1465953146760" MODIFIED="1465953148081">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="loadClass" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_372547126" CREATED="1465956161297" MODIFIED="1465956162309">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="findClass" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1601976200" CREATED="1465956238870" MODIFIED="1465956363094">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<arrowlink SHAPE="CUBIC_CURVE" COLOR="#000000" WIDTH="2" TRANSPARENCY="80" FONT_SIZE="9" FONT_FAMILY="SansSerif" DESTINATION="ID_75763061" STARTINCLINATION="316;0;" ENDINCLINATION="316;0;" STARTARROW="NONE" ENDARROW="DEFAULT"/>
</node>
</node>
</node>
<node TEXT="callActivityOnCreate" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1908240684" CREATED="1465953148605" MODIFIED="1465953166174">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="BundleClassLoader" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_748324210" CREATED="1465955048271" MODIFIED="1465955081979">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<node TEXT="startBundle" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_518895058" CREATED="1465955076026" MODIFIED="1465955076819">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="&#x7cfb;&#x7edf;Instrumentation.callActivityOnCreate" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_285977342" CREATED="1465955662518" MODIFIED="1465970877492">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      private Activity performLaunchActivity(ActivityClientRecord r, Intent customIntent) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// System.out.println(&quot;##### [&quot; + System.currentTimeMillis() + &quot;] ActivityThread.performLaunchActivity(&quot; + r + &quot;)&quot;);
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ActivityInfo aInfo = r.activityInfo;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (r.packageInfo == null) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r.packageInfo = getPackageInfo(aInfo.applicationInfo, r.compatInfo,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Context.CONTEXT_INCLUDE_CODE);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ComponentName component = r.intent.getComponent();
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (component == null) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;component = r.intent.resolveActivity(
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mInitialApplication.getPackageManager());
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r.intent.setComponent(component);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (r.activityInfo.targetActivity != null) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;component = new ComponentName(r.activityInfo.packageName,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r.activityInfo.targetActivity);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Activity activity = null;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;try {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;java.lang.ClassLoader cl = r.packageInfo.getClassLoader();
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;activity = mInstrumentation.newActivity(
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cl, component.getClassName(), r.intent);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; StrictMode.incrementExpectedActivityCount(activity.getClass());
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r.intent.setExtrasClassLoader(cl);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r.intent.prepareToEnterProcess();
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (r.state != null) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;r.state.setClassLoader(cl);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} catch (Exception e) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!mInstrumentation.onException(activity, e)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;throw new RuntimeException(
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;Unable to instantiate activity &quot; + component
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ &quot;: &quot; + e.toString(), e);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;
    </p>
  </body>
</html>

</richcontent>
<node TEXT="prePerformCreate" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_187273904" CREATED="1465955693402" MODIFIED="1465955700199">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="mMessageQueue.addIdleHandler" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1322400839" CREATED="1465955840143" MODIFIED="1465956714806">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;Activity&#37117;&#24517;&#39035;&#36827;&#20837;&#21040;&#31995;&#32479;&#28040;&#24687;&#24490;&#29615;&#21019;&#24314;
    </p>
  </body>
</html>
</richcontent>
<node TEXT="ActivityProxy" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1207479310" CREATED="1465955940033" MODIFIED="1465955944963">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="createProxyActivity" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1512807056" CREATED="1465955978903" MODIFIED="1465956351035">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<arrowlink SHAPE="CUBIC_CURVE" COLOR="#000000" WIDTH="2" TRANSPARENCY="80" FONT_SIZE="9" FONT_FAMILY="SansSerif" DESTINATION="ID_1711066856" STARTINCLINATION="889;0;" ENDINCLINATION="889;0;" STARTARROW="NONE" ENDARROW="DEFAULT"/>
</node>
</node>
</node>
</node>
<node TEXT="activity.performCreate" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1028220337" CREATED="1465955712614" MODIFIED="1465955713849">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="postPerformCreate" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1992293603" CREATED="1465955719223" MODIFIED="1465955720610">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
</node>
</node>
</node>
<node TEXT="ACDD&#x53cd;&#x5c04;&#x603b;&#x7ed3;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_980749790" CREATED="1465971865749" MODIFIED="1465971878470">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<hook NAME="SummaryNode"/>
<node TEXT="&#x83b7;&#x53d6;ActivityThread&#x5b9e;&#x4f8b;currentActivityThread" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_408037414" CREATED="1465971880280" MODIFIED="1465971932476">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x66ff;&#x6362;currentActivityThread&#x6210;&#x5458;mPackage.get(pkg).mClassLoader" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1987022284" CREATED="1465971912081" MODIFIED="1465972081021">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x66ff;&#x6362;currentActivityThread&#x6210;&#x5458;mInstrumentation" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_87325468" CREATED="1465972084256" MODIFIED="1465972143396">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x66ff;&#x6362;currentActivityThread&#x6210;&#x5458;mH.mCallback" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1483126509" CREATED="1465972144567" MODIFIED="1465972165182">
<edge STYLE="bezier" COLOR="#ff0000" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
</node>
</node>
<node TEXT="onCreate" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" POSITION="right" ID="ID_118416585" CREATED="1465785579193" MODIFIED="1465785586308">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="ACDDInitializer&#x5355;&#x4f8b;startup" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1784202464" CREATED="1465785639952" MODIFIED="1465785656668">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="isPurgeUpdate" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_339274676" CREATED="1465880531671" MODIFIED="1465882154002">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<node TEXT="true" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1222668631" CREATED="1465880550277" MODIFIED="1465880552134">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="startlevel=-1;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_632431588" CREATED="1465880611286" MODIFIED="1465880630435">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x6e05;&#x7406;&#x6240;&#x6709;&#x63d2;&#x4ef6;&#x6587;&#x4ef6;&#x5939;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_629711556" CREATED="1465880631030" MODIFIED="1465882082722">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<node TEXT="&#x540e;&#x9762;&#x53ef;&#x4ee5;&#x5c1d;&#x8bd5;&#x53ea;&#x5220;&#x9664;&#x6307;&#x5b9a;&#x63d2;&#x4ef6;&#x76ee;&#x5f55;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1573490193" CREATED="1465882097522" MODIFIED="1465882118067">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="startlevel=1" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_111668492" CREATED="1465880649380" MODIFIED="1465880654874">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="systemBundle.setLevel=&gt;Framework.startlevel=1" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_445279210" CREATED="1465880658445" MODIFIED="1465880688962">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="storeProfile&#x4fdd;&#x5b58;Framework.startlevel&#x5230;meta&#x6587;&#x4ef6;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1091840138" CREATED="1465880695438" MODIFIED="1465880718386">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="false" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_242689893" CREATED="1465880552693" MODIFIED="1465880554817">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="restoreProfile" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1628409187" CREATED="1465880723837" MODIFIED="1465880798355">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="&#x8bfb;&#x53d6;meta" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_949116690" CREATED="1465880800238" MODIFIED="1465880810555">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x521d;&#x59cb;&#x5316;&#x63d2;&#x4ef6;&#x76ee;&#x5f55;&#x63d2;&#x4ef6;&#xff0c;&#x5b9e;&#x4f8b;&#x5316;BundleImpl" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_972873930" CREATED="1465880811021" MODIFIED="1465880825994">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="BundleArchiveRevision" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1405296543" CREATED="1465954732841" MODIFIED="1465954924945">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="true" ITALIC="false"/>
<node TEXT="findClass" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_75763061" CREATED="1465954737622" MODIFIED="1465954794000">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 9.0pt">Class&lt;?&gt; <font color="#ffc66d">findClass</font>(String name<font color="#cc7832">, </font>ClassLoader classLoader)<br/>        <font color="#cc7832">throws </font>ClassNotFoundException {<br/>    <font color="#cc7832">try </font>{<br/>        <font color="#cc7832">if </font>(ACDDHacks.<font color="#9876aa"><i>LexFile </i></font>== <font color="#cc7832">null<br/>                </font>|| ACDDHacks.<font color="#9876aa"><i>LexFile</i></font>.getmClass() == <font color="#cc7832">null</font>) {<br/>            <font color="#cc7832">if </font>(!isDexOpted()) {<br/>                optDexFile()<font color="#cc7832">;<br/>            </font>}<br/>            <font color="#cc7832">if </font>(<font color="#cc7832">this</font>.<font color="#9876aa">dexFile </font>== <font color="#cc7832">null</font>) {<br/>                loadDex(<font color="#cc7832">new </font>File(<font color="#cc7832">this</font>.<font color="#9876aa">revisionDir</font><font color="#cc7832">, </font><font color="#9876aa"><i>BUNDLE_ODEX_FILE</i></font>))<font color="#cc7832">;<br/>            </font>}<br/>            Class&lt;?&gt; loadClass = <font color="#cc7832">this</font>.<font color="#9876aa">dexFile</font>.loadClass(name<font color="#cc7832">, </font>classLoader)<font color="#cc7832">;<br/>            this</font>.<font color="#9876aa">isDexFileUsed </font>= <font color="#cc7832">true;<br/>            return </font>loadClass<font color="#cc7832">;<br/>        </font>}<br/>        <font color="#cc7832">if </font>(<font color="#cc7832">this</font>.<font color="#9876aa">dexClassLoader </font>== <font color="#cc7832">null</font>) {<br/>            File file = <font color="#cc7832">new </font>File(RuntimeVariables.<font color="#9876aa"><i>androidApplication<br/>                    </i></font>.getFilesDir().getParentFile()<font color="#cc7832">, </font><font color="#6a8759">&quot;lib&quot;</font>)<font color="#cc7832">;<br/>            this</font>.<font color="#9876aa">dexClassLoader </font>= <font color="#cc7832">new </font>BundleArchiveRevisionClassLoader(<br/>                    <font color="#cc7832">this</font>.<font color="#9876aa">bundleFile</font>.getAbsolutePath()<font color="#cc7832">,<br/>                    this</font>.<font color="#9876aa">revisionDir</font>.getAbsolutePath()<font color="#cc7832">,<br/>                    </font>file.getAbsolutePath()<font color="#cc7832">, </font>classLoader)<font color="#cc7832">;<br/>        </font>}<br/>        <font color="#cc7832">return </font>(Class) ACDDHacks.<font color="#9876aa"><i>DexClassLoader_findClass</i></font>.invoke(<br/>                <font color="#cc7832">this</font>.<font color="#9876aa">dexClassLoader</font><font color="#cc7832">, </font>name)<font color="#cc7832">;<br/>    </font>} <font color="#cc7832">catch </font>(IllegalArgumentException e) {<br/>        <font color="#cc7832">return null;<br/>    </font>} <font color="#cc7832">catch </font>(InvocationTargetException e) {<br/>        <font color="#cc7832">return null;<br/>    </font>} <font color="#cc7832">catch </font>(Throwable e) {<br/>        <font color="#cc7832">if </font>(!(e <font color="#cc7832">instanceof </font>ClassNotFoundException)) {<br/>            <font color="#cc7832">if </font>(e <font color="#cc7832">instanceof </font>DexLoadException) {<br/>                <font color="#cc7832">throw </font>((DexLoadException) e)<font color="#cc7832">;<br/>            </font>}<br/>            <font color="#9876aa"><i>log</i></font>.error(<font color="#6a8759">&quot;Exception while find class in archive revision: &quot;<br/>                    </font>+ <font color="#cc7832">this</font>.<font color="#9876aa">bundleFile</font>.getAbsolutePath()<font color="#cc7832">, </font>e)<font color="#cc7832">;<br/>        </font>}<br/>        <font color="#cc7832">return null;<br/>    </font>}<br/>}</pre>
  </body>
</html>
</richcontent>
<node TEXT="loadDex" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1805071976" CREATED="1465954808909" MODIFIED="1465956807741">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 9.0pt">DexFile.<i>loadDex</i>(<font color="#cc7832">this</font>.<font color="#9876aa">bundleFile</font>.getAbsolutePath()<font color="#cc7832">,<br/>        </font>file.getAbsolutePath()<font color="#cc7832">, </font><font color="#6897bb">0</font>)<font color="#cc7832">;</font></pre>
  </body>
</html>
</richcontent>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;&#25554;&#20214;&#30446;&#24405;loadDex
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="loadClass" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_240112733" CREATED="1465954906566" MODIFIED="1465954908977">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
</node>
</node>
</node>
<node TEXT="systemBundle.setLevel" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_166189012" CREATED="1465880830614" MODIFIED="1465880846066">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="&#x63d2;&#x4ef6;startlevel&#x7ea7;&#x522b;&#x4e0e;1&#x5dee;&#x503c;&#x5c0f;&#x4e8e;Framework.startlevel&#x4e0e;1&#x5dee;&#x503c;&#x5219;&#x542f;&#x52a8;&#x63d2;&#x4ef6;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_94896361" CREATED="1465880904381" MODIFIED="1465880987603">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x5426;&#x5219;&#x505c;&#x6b62;&#x63d2;&#x4ef6;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1553213765" CREATED="1465880988446" MODIFIED="1465880994178">
<edge STYLE="bezier" COLOR="#0000ff" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node TEXT="installBundle" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" POSITION="right" ID="ID_586199917" CREATED="1465785799560" MODIFIED="1465960074161">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#23433;&#35013;&#26032;&#25554;&#20214;
    </p>
  </body>
</html>
</richcontent>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#20027;&#21160;&#35843;&#29992;&#23433;&#35013;&#26032;&#25554;&#20214;
    </p>
  </body>
</html>

</richcontent>
<node TEXT="&#x4ece;&#x63d2;&#x4ef6;&#x76ee;&#x5f55;&#x52a0;&#x8f7d;&#x63d2;&#x4ef6;&#x5b9e;&#x4f8b;&#x5316;BundleImpl" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_434797735" CREATED="1465881793991" MODIFIED="1465881980508">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<hook NAME="FirstGroupNode"/>
</node>
<node TEXT="&#x6839;&#x636e;&#x4e0b;&#x8f7d;&#x7684;&#x63d2;&#x4ef6;&#x6587;&#x4ef6;&#x521d;&#x59cb;&#x5316;BundleImpl" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_318967140" CREATED="1465881819382" MODIFIED="1465881877451">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<node TEXT="storeMetadata&#x4fdd;&#x5b58;&#x63d2;&#x4ef6;meate&#x6587;&#x4ef6;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1001299768" CREATED="1465786141777" MODIFIED="1465881771075">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
<node TEXT="" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_940630632" CREATED="1465881980507" MODIFIED="1465881980508">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<hook NAME="SummaryNode"/>
<node TEXT="&#x751f;&#x6210;&#x63d2;&#x4ef6;BundleImpl&#x5b9e;&#x4f8b;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1923518547" CREATED="1465786103923" MODIFIED="1465786618530">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
<richcontent TYPE="NOTE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;Framework&#20445;&#23384;&#30340;&#25554;&#20214;&#21015;&#34920;&#20013;&#24050;&#26377;&#21017;&#30452;&#25509;&#20351;&#29992;
    </p>
  </body>
</html>
</richcontent>
<node TEXT="updateMetadata&#x751f;&#x6210;&#x63d2;&#x4ef6;&#x5143;&#x6570;&#x636e;" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1444405324" CREATED="1465797632001" MODIFIED="1465797687008">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
<node TEXT="&#x751f;&#x6210;BundleArchive&#x5b9e;&#x4f8b;&#x7ba1;&#x7406;&#x63d2;&#x4ef6;bundle.zip" COLOR="#000000" STYLE="as_parent" MAX_WIDTH="600" MIN_WIDTH="1" ID="ID_1937482898" CREATED="1465797688331" MODIFIED="1465797873602">
<edge STYLE="bezier" COLOR="#00ff00" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="10" BOLD="false" ITALIC="false"/>
</node>
</node>
</node>
</node>
</node>
</map>
